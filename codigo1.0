#include <Wire.h> // Librería para comunicación I2C
#include <Adafruit_MPU6050.h> // Librería del sensor MPU-6050
#include <Adafruit_Sensor.h> // Librería base de Adafruit para sensores
#include <BleMouse.h>

BleMouse bleMouse("ESP32 Mouse", "ESP32", 100);  // Create the BLE Mouse object
Adafruit_MPU6050 mpu;  // Crear el objeto para el MPU-6050
const int VRX_PIN = 34;
const int VRY_PIN = 35;

void setup() {
  // 1. Iniciar la comunicación serial a alta velocidad (¡Asegúrate de usar 115200 en el Monitor Serial!)
  Serial.begin(115200); 
  pinMode(23, OUTPUT);
  pinMode(13, INPUT_PULLUP);
  /*bleMouse.begin();   // Initialize BLE Mouse
*/
 
  // Configuración de los rangos del sensor (opcional, pero recomendado)
  /*mpu.setAccelerometerRange(MPU6050_RANGE_8_G); 
  mpu.setGyroRange(MPU6050_RANGE_500_DEG);     
  mpu.setFilterBandwidth(MPU6050_BAND_21_HZ);  */
}

void loop() {
  int xValue = analogRead(VRX_PIN);
  int yValue = analogRead(VRY_PIN);
  digitalWrite(23, HIGH); 
  int BotonUpd = analogRead(13);
  sensors_event_t a, g, temp;

  Serial.print("X: ");
  Serial.print(xValue);
  Serial.print(" | Y: ");
  Serial.println(yValue);


  /*mpu.getEvent(&a, &g, &temp);*/
  // --- IMPRESIÓN DE DATOS (ACELERACIÓN) ---
  Serial.print("X: ");
  Serial.print(a.acceleration.x,1); 
  Serial.print(" |  Y: ");
  Serial.println(a.acceleration.y,1);

  if (BotonUpd == 0) {   Serial.print("elpepe");}

 
  delay(300); // Pausa para no saturar el puerto serial
}




/*
void loop() {

 while(bleMouse.isConnected() && ) {
    Serial.println("Mouse connected - moving cursor...");

    // Move right
    for (int i = 0; i < 50; i++) {
      bleMouse.move(5, 0); // x, y
      delay(20);
    }

    // Move down
    for (int i = 0; i < 50; i++) {
      bleMouse.move(0, 5);
      delay(20);
    }

    // Move left
    for (int i = 0; i < 50; i++) {
      bleMouse.move(-5, 0);
      delay(20);
    }

    // Move up
    for (int i = 0; i < 50; i++) {
      bleMouse.move(0, -5);
      delay(20);
    }

    // Left click
    Serial.println("Click!");
    bleMouse.click(MOUSE_LEFT);

    delay(2000); // Pause 2s before repeating
  }
}*/
